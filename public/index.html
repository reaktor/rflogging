<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      div {
        border: 1px solid #000000;
      }
      .main {
        display: flex;
        flex-direction: row;
        height: 100%;
        width: 100%;
      }
      .page {
        flex-grow: 1;
      }
      .testdata {
        display: flex;
        flex-direction: column;
        font-family: monospace;
        min-width: 300px;
        overflow:scroll;  
      }
      .sectionstart {
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        font-size: 9px;
        transition: all 0.6s;
        opacity: 0;
      }
      .sectionend {
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
        font-size: 9px;
        transition: all 0.6s;
        opacity: 0;
      }
      .suite {
        background: linear-gradient(to right, #c5f79b 0%,#c5f79b 30%,#c5f79b 30%,#9ee067 30%,#9ee067 100%);
      }
      .test {
        background: linear-gradient(to right, #aaf0ff 0%,#aaf0ff 20%,#aaf0ff 20%,#78d3e8 20%,#78d3e8 100%);
      }
      .keyword {
        background: linear-gradient(to right, #d8d8d8 0%,#d8d8d8 15%,#d8d8d8 15%,#b7b7b7 15%,#b7b7b7 100%);
      }
      .failed {
        background-color: red;
      }
      .show {
        opacity: 1;
      }
      div {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="main">
    <iframe class="page" src="login.html">
    </iframe>
    <div id='testdata' class='testdata'>
    </div>
    </div>
    <script>
      var HOST = location.origin.replace(/^http/, 'ws');
      var ws = new WebSocket("ws://radiant-wildwood-39558.herokuapp.com/");
      var el = document.getElementById('testdata');
      ws.onmessage = function (event) {
        var node = document.createElement("div");
        var data = JSON.parse(event.data);
        if (data && data.length > 2) {
          if ("START" === data[2]) {
            node.className = "sectionstart";
          };
          if ("END" === data[2]) {
            node.className = "sectionend";
          };
          if ("KEYWORD" === data[3]) {
            node.className += " keyword";
          };
          if ("SUITE" === data[3]) {
            node.className += " suite";
          };
          if ("TEST" === data[3]) {
            node.className += " test";
          };
          if (data[4].indexOf("FAIL") !== -1) {
            node.className += " failed";
          };
          var text = document.createTextNode(data[4]);
          node.appendChild(text);
          setTimeout(function() {
            node.className = node.className + " show";
          }, 10);
          el.appendChild(node);
          el.scrollTop = el.scrollHeight;
        };
      };
    </script>
  </body>
</html>