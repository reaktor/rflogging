<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      .testdata {
        display: flex;
        flex-direction: column;
        font-family: monospace;
      }
      .section {
        background-color: aquamarine;
        font-size: 9px;
        transition: all 0.4s ease-out;
        opacity: 0;
      }
      .show {
        opacity: 1;
      }
      div {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id='testdata' class='testdata'>

    </div>
    <script>
      var HOST = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(HOST);
      var el = document.getElementById('testdata');
      ws.onmessage = function (event) {
        var node = document.createElement("div");
        var data = JSON.parse(event.data);
        if (data && data.length > 2) {
          if ("START" === data[2] || "END" === data[2]) {
            node.className = "section";
          };
          var text = document.createTextNode(data[3]);
          node.appendChild(text);
          setTimeout(function() {
            node.className = node.className + " show";
          }, 10);
          el.appendChild(node);
          window.scrollTo(0,document.body.scrollHeight);
        };
      };
    </script>
  </body>
</html>